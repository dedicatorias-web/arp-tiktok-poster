# Nome do workflow que aparecer√° na aba "Actions" do GitHub
name: Publicar Video no TikTok

# Define o gatilho (trigger) do workflow.
# workflow_dispatch permite que voc√™ inicie este workflow manualmente pela interface do GitHub.
on:
  workflow_dispatch:

# Define os trabalhos (jobs) a serem executados.
jobs:
  # Nome do nosso job. Pode ser qualquer nome.
  upload-video:
    # A m√°quina virtual onde o job ser√° executado. 'ubuntu-latest' √© a padr√£o e recomendada.
    runs-on: ubuntu-latest

    # A sequ√™ncia de passos que o job ir√° executar.
    steps:
      # Passo 1: Baixa uma c√≥pia do seu reposit√≥rio para a m√°quina virtual.
      # Essencial para ter acesso ao seu arquivo de v√≠deo (ex: video_teste.mp4).
      - name: Checkout do c√≥digo
        uses: actions/checkout@v4

      # Passo 2: Configura o ambiente Python na m√°quina virtual.
      - name: Configurar Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      # Passo 3: Instala a biblioteca necess√°ria para fazer o upload.
      - name: Instalar a biblioteca tiktok-uploader
        run: pip install tiktok-uploader

      # Passo 4: Executa o processo de upload.
      - name: Publicar no TikTok
        run: |
          # Cria um arquivo tempor√°rio 'cookies.txt' com o conte√∫do do seu segredo.
          # Esta √© a forma mais segura e est√°vel de passar as credenciais para a biblioteca.
          echo "${{ secrets.TIKTOK_COOKIE }}" > cookies.txt

          # Executa o comando de upload, passando o arquivo de v√≠deo, a legenda
          # e o arquivo de cookies para autentica√ß√£o.
          tiktok-uploader -v video_teste.mp4 -d "Meu primeiro v√≠deo postado via GitHub Actions! ü§ñ" --cookies cookies.txt
